import{Q as L}from"./use-fullscreen.1139cd7a.js";import{a as A,Q as i}from"./QCard.ad7c37e7.js";import{Q as n}from"./QInput.a8dc7612.js";import{Q as O}from"./QImg.3231bf1d.js";import{_ as T,s as v,a8 as C,u as $,b as j,o as p,c as b,f as t,k as o,e as d,F as z,a0 as N,aS as F,r as E,i as R,z as W,X as V,Q as P,Z as S,t as x,a2 as X,a3 as Z,a1 as G}from"./index.805d9757.js";import{Q as H}from"./QCardActions.5a8fa2a5.js";import{Q as J}from"./QForm.28d2e57b.js";import{Q as K}from"./QDialog.e8745673.js";import{Q as Y,a as ee,b as g}from"./QResponsive.a33cc3e6.js";import{C as te}from"./ClosePopup.07d1cbf4.js";import{u as le}from"./use-quasar.58a1fc48.js";/* empty css                */import"./use-dark.a99e19f4.js";import"./focus-manager.a1b6aa0a.js";import"./use-ratio.da19c400.js";import"./use-prevent-scroll.d013994a.js";import"./scroll.12c6c71b.js";import"./focusout.3ffa7671.js";import"./QList.09f32a10.js";import"./QMarkupTable.475cd2aa.js";import"./QSelect.2e757d61.js";import"./QChip.57ff938f.js";import"./QItem.885ea5c6.js";import"./QMenu.3898f4ec.js";import"./rtl.b51694b1.js";import"./format.865294d5.js";const s=_=>(X("data-v-35e345ca"),_=_(),Z(),_),oe={id:"form"},ae=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg text-h6"},"\u51FA\u8CA8",-1)),re=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u8A02\u55AE\u7DE8\u865F",-1)),de=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u8CE3\u5BB6\uFF29\uFF24 ",-1)),se=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u8CB7\u5BB6\u59D3\u540D",-1)),ne=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u8CB7\u5BB6\u96FB\u8A71",-1)),ie=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u806F\u7D61\u65B9\u5F0F",-1)),me=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u5546\u54C1\u7E3D\u984D",-1)),ue=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u8A02\u55AE\u65E5\u671F",-1)),ce=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u4ED8\u6B3E\u65B9\u5F0F",-1)),pe={class:"text-center"},_e=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u5546\u54C1\u540D\u7A31",-1)),ye=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u6578\u91CF",-1)),fe=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u55AE\u50F9",-1)),he=s(()=>d("div",{id:"title",class:"q-ml-xl q-my-lg q-pl-lg q-py-sm text-h4 text-weight-bold non-selectable"},"\u51FA\u552E\u8A02\u55AE\u7BA1\u7406",-1)),ve={id:"container",class:"flex justify-center q-px-xl q-pb-xl"},be={key:0},ge={key:1},Ve={__name:"MemberSalesManagement",setup(_){const q=le(),m=v(""),y=v(!1),D=[{name:"datedetail",required:!0,label:"\u4EA4\u6613\u65E5\u671F",align:"center",field:"datedetail",sortable:!0},{name:"_id",required:!0,label:"\u8A02\u55AE\u7DE8\u865F",align:"center",field:"_id",sortable:!1},{name:"buyer",required:!0,label:"\u8CB7\u5BB6",align:"center",field:"buyer",sortable:!1},{name:"total",required:!0,label:"\u7E3D\u91D1\u984D",align:"center",field:"total",sortable:!1},{name:"check",required:!0,label:"\u51FA\u8CA8\u72C0\u614B",align:"center",field:"check",sortable:!1},{name:"detail",required:!0,label:"\u8A73\u7D30\u8CC7\u8A0A",align:"center",field:"detail",sortable:!1}],u=C([]),w=async()=>{try{const{data:r}=await N.get("/orders/sell");u.splice(0,u.length,...r.result),k.value.splice(0,u.length,...r.result),console.log(u)}catch(r){console.log(r),q.notify({type:"negative",message:r.response.data.message})}};w();const l=C({_id:"",buyer:"",realName:"",phoneNumber:"",address:"",payment:"",total:"",date:"",cart:[],check:!1}),I=r=>{y.value=!0,l._id=r._id,l.buyer=r.user.nickname+`\uFF08${r.user._id}\uFF09`,l.realName=r.realName,l.phoneNumber=r.phoneNumber,l.address=r.address,l.payment=r.payment,l.total=r.total,l.check=r.check,l.date=new Date(r.date).toLocaleString(),l.cart=[...r.cart]},B=async()=>{try{await N.patch("/orders/"+l._id,l),await G.fire({icon:"success",title:"\u66F4\u65B0\u6210\u529F",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"},iconColor:"#A6D8D4",confirmButtonColor:"#A6D8D4",width:"20rem"}),w()}catch(r){q.notify({type:"negative",message:r.response.data.message})}},k=$(()=>u.filter(r=>m.value?r.user.nickname.indexOf(m.value)>-1||r._id.indexOf(m.value)>-1:!0)),f=v(""),h=v(""),Q=()=>{window.innerWidth>975?(f.value=12,h.value=5):window.innerWidth>1200?(f.value=5,h.value=5):(f.value=2,h.value=2)};return Q(),window.addEventListener("resize",()=>{Q()}),(r,a)=>{const M=j("router-link");return p(),b(z,null,[t(K,{modelValue:y.value,"onUpdate:modelValue":a[10]||(a[10]=e=>y.value=e)},{default:o(()=>[d("div",oe,[t(J,{onSubmit:F(B,["prevent"])},{default:o(()=>[t(A,null,{default:o(()=>[t(i,null,{default:o(()=>[t(i,{horizontal:"",class:"flex justify-center"},{default:o(()=>[ae,t(L,{style:{"margin-top":"12px"},color:"secondary",modelValue:l.check,"onUpdate:modelValue":a[0]||(a[0]=e=>l.check=e)},null,8,["modelValue"])]),_:1}),t(i,{horizontal:""},{default:o(()=>[re,t(n,{type:"text",readonly:"",modelValue:l._id,"onUpdate:modelValue":a[1]||(a[1]=e=>l._id=e),color:"secondary"},null,8,["modelValue"])]),_:1}),t(i,{horizontal:""},{default:o(()=>[de,t(n,{type:"text",readonly:"",modelValue:l.buyer,"onUpdate:modelValue":a[2]||(a[2]=e=>l.buyer=e),color:"secondary"},null,8,["modelValue"])]),_:1}),t(i,{horizontal:"",class:"two"},{default:o(()=>[se,t(n,{type:"text",readonly:"",modelValue:l.realName,"onUpdate:modelValue":a[3]||(a[3]=e=>l.realName=e),color:"secondary"},null,8,["modelValue"]),ne,t(n,{type:"text",readonly:"",modelValue:l.phoneNumber,"onUpdate:modelValue":a[4]||(a[4]=e=>l.phoneNumber=e),color:"secondary"},null,8,["modelValue"])]),_:1}),t(i,{horizontal:""},{default:o(()=>[ie,t(n,{type:"text",readonly:"",modelValue:l.address,"onUpdate:modelValue":a[5]||(a[5]=e=>l.address=e),color:"secondary"},null,8,["modelValue"])]),_:1}),t(i,{horizontal:"",class:"two"},{default:o(()=>[me,t(n,{type:"text",readonly:"",modelValue:l.total,"onUpdate:modelValue":a[6]||(a[6]=e=>l.total=e),color:"secondary"},null,8,["modelValue"]),ue,t(n,{type:"text",readonly:"",modelValue:l.date,"onUpdate:modelValue":a[7]||(a[7]=e=>l.date=e),color:"secondary"},null,8,["modelValue"])]),_:1}),t(i,{horizontal:"",class:"q-mb-sm"},{default:o(()=>[ce,t(n,{type:"text",readonly:"",modelValue:l.payment,"onUpdate:modelValue":a[8]||(a[8]=e=>l.payment=e),color:"secondary"},null,8,["modelValue"])]),_:1}),(p(!0),b(z,null,E(l.cart,(e,U)=>(p(),R(i,{key:U,style:{background:"rgb(228, 228, 228)"},class:"q-mb-md"},{default:o(()=>[d("div",pe,[t(M,{to:"/trade/"+e.product._id},{default:o(()=>[t(O,{src:e.product.image,style:{width:"150px",height:"120px"}},null,8,["src"])]),_:2},1032,["to"])]),t(i,{horizontal:""},{default:o(()=>[_e,t(n,{type:"text",readonly:"",modelValue:e.product.name,"onUpdate:modelValue":c=>e.product.name=c,color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(i,{horizontal:"",class:"two"},{default:o(()=>[ye,t(n,{type:"text",readonly:"",modelValue:e.quantity,"onUpdate:modelValue":c=>e.quantity=c,color:"secondary"},null,8,["modelValue","onUpdate:modelValue"]),fe,t(n,{type:"text",readonly:"",modelValue:e.product.price,"onUpdate:modelValue":c=>e.product.price=c,color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(H,{class:"flex justify-center q-mb-md"},{default:o(()=>[W(t(V,{type:"submit",unelevated:"",rounded:"",style:{width:"6rem"},size:"1rem",color:"secondary",label:"\u9001\u51FA"},null,512),[[te]]),t(V,{unelevated:"",rounded:"",style:{width:"6rem"},size:"1rem",outline:"",color:"secondary",label:"\u53D6\u6D88",onClick:a[9]||(a[9]=e=>y.value=!1)})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])]),_:1},8,["modelValue"]),he,d("div",ve,[t(Y,{id:"wh",ratio:f.value/h.value},{default:o(()=>[t(ee,{columns:D,"row-key":"_id",rows:k.value,"rows-per-page-options":[10,0]},{"top-right":o(()=>[t(n,{color:"white",filled:"",clearable:"",borderless:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":a[11]||(a[11]=e=>m.value=e),placeholder:"\u8ACB\u8F38\u5165\u8A02\u55AE\u7DE8\u865F/\u8CB7\u5BB6\u540D\u7A31"},{append:o(()=>[t(P,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-buyer":o(e=>[t(g,{props:e},{default:o(()=>[S(x(e.row.user.nickname)+" \uFF08"+x(e.row.user._id)+"\uFF09 ",1)]),_:2},1032,["props"])]),"body-cell-datedetail":o(e=>[t(g,{props:e},{default:o(()=>[S(x(new Date(e.row.date).toLocaleString()),1)]),_:2},1032,["props"])]),"body-cell-check":o(e=>[t(g,{props:e},{default:o(()=>[e.value?(p(),b("div",be,"\u5DF2\u51FA\u8CA8")):(p(),b("div",ge,"\u6E96\u5099\u4E2D"))]),_:2},1032,["props"])]),"body-cell-detail":o(e=>[t(g,{props:e},{default:o(()=>[t(V,{round:"",color:"secondary",onClick:U=>I(e.row),icon:"mdi-file-document-edit"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1},8,["ratio"])])],64)}}};var Ze=T(Ve,[["__scopeId","data-v-35e345ca"]]);export{Ze as default};
