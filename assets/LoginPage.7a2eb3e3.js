import{_ as C,aF as V,V as F,a8 as I,o as f,c as h,e as i,f as e,k as t,aS as B,X as d,Y as L,$ as U,Z as m,F as A,r as E,t as N,Q as b,a2 as P,a3 as D,aD as M,a1 as g}from"./index.c8f9d440.js";import{Q as p,a as _}from"./QItem.679a406a.js";import{Q as O,a as x}from"./QList.154434ca.js";import{Q as R}from"./QMenu.f753cafe.js";import{Q as T}from"./QToolbar.9f7e3ad3.js";import{a as $,Q as r}from"./QCard.ba089e82.js";import{Q}from"./QInput.77b6713d.js";import{Q as w}from"./QCardActions.8d6a0330.js";import{Q as j}from"./QForm.a35d9800.js";import{v as z}from"./index.41093a57.js";import{u as G}from"./use-quasar.38f3816b.js";import"./use-dark.b556ecaa.js";import"./scroll.beb93c22.js";import"./focusout.dd8c9852.js";import"./focus-manager.a1b6aa0a.js";const v=n=>(P("data-v-0c56e18b"),n=n(),D(),n),X={class:"container"},Y={class:"bg_effect"},Z=v(()=>i("div",{id:"star"},null,-1)),H=["src"],J={class:"row flex-center login"},K=v(()=>i("div",{class:"title text-center text-h4 q-py-md non-selectable"},"\u767B\u5165\u6703\u54E1",-1)),W={__name:"LoginPage",setup(n){const k=G(),y=V(),u=F(),o=I({email:"",password:""}),s={required:a=>!!a||"\u6B04\u4F4D\u5FC5\u586B",email:a=>z.isEmail(a)||"\u4FE1\u7BB1\u683C\u5F0F\u932F\u8AA4",min:a=>a.length>=4||"\u9577\u5EA6\u5FC5\u9808\u5927\u65BC 4 \u500B\u5B57",max:a=>a.length<=20||"\u9577\u5EA6\u5FC5\u9808\u5C0F\u65BC 20 \u500B\u5B57"},q=async()=>{try{const{data:a}=await M.post("/users/login",o);await g.fire({icon:"success",title:"\u767B\u5165\u6210\u529F",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"},iconColor:"#F198AF",confirmButtonColor:"#F198AF",width:"20rem"}),u.login({user:a.result.user,token:a.result.token,email:a.result.email,nickname:a.result.nickname,avatar:a.result.avatar,cart:a.result.cart,role:a.result.role,block:a.result.block}),u.isBlock&&await g.fire({icon:"warning",title:"\u5E33\u865F\u505C\u6B0A\u4E2D",text:"\u66AB\u6642\u95DC\u9589\u4EA4\u6613\u529F\u80FD\uFF0C\u5DF2\u5B8C\u6210\u7684\u8A02\u55AE\u4E0D\u53D7\u5F71\u97FF\u3002",iconColor:"#ff0000",confirmButtonColor:"#ff0000",width:"30rem"}),y.push("/")}catch(a){k.notify({type:"negative",message:a.response.data.message})}},S=[{to:"/",label:"\u9996\u9801",icon:"home"},{to:"/latestnews",label:"\u6700\u65B0\u6D88\u606F",icon:"announcement"},{to:"/realms",label:"\u5340\u57DF",icon:"location_on"},{to:"/trade",label:"\u4EA4\u6613",icon:"local_mall"},{to:"/contact",label:"\u806F\u7D61",icon:"call"}];return(a,c)=>(f(),h("div",X,[i("div",Y,[Z,e(T,{class:"text-white q-px-lg q-pt-md",style:{height:"50px"}},{default:t(()=>[e(d,{class:"q-ml-auto",flat:"",round:"",dense:""},{default:t(()=>[e(L,null,{default:t(()=>[i("img",{src:U(u).avatar},null,8,H)]),_:1}),e(R,{square:"",class:"bg-primary text-center"},{default:t(()=>[e(O,{dense:""},{default:t(()=>[e(p,{clickable:""},{default:t(()=>[e(_,null,{default:t(()=>[m("USER")]),_:1})]),_:1}),e(x,{inset:""}),(f(),h(A,null,E(S,l=>e(p,{clickable:"",to:l.to,key:l.to},{default:t(()=>[e(_,null,{default:t(()=>[m(N(l.label),1)]),_:2},1024)]),_:2},1032,["to"])),64)),e(x,{inset:""}),e(p,{clickable:"",to:"/"},{default:t(()=>[e(_,null,{default:t(()=>[m("\u56DE\u9996\u9801")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i("div",J,[e(j,{onSubmit:B(q,["prevent"])},{default:t(()=>[e($,null,{default:t(()=>[e(r,{horizontal:""},{default:t(()=>[e(r,{class:"left"}),e(r,{class:"right flex column justify-center"},{default:t(()=>[e(r,null,{default:t(()=>[K,e(Q,{modelValue:o.email,"onUpdate:modelValue":c[0]||(c[0]=l=>o.email=l),rules:[s.required,s.email],dark:"",class:"q-mb-xs",type:"email",label:"Email",hint:"\u8ACB\u8F38\u5165\u4FE1\u7BB1","hide-hint":"",filled:"",dense:"",clearable:"","hide-bottom-space":"","clear-icon":"backspace"},{prepend:t(()=>[e(b,{name:"mail"})]),_:1},8,["modelValue","rules"])]),_:1}),e(r,null,{default:t(()=>[e(Q,{modelValue:o.password,"onUpdate:modelValue":c[1]||(c[1]=l=>o.password=l),rules:[s.required,s.min,s.max],dark:"",class:"q-mb-xs",type:"password",label:"Password",hint:"\u8ACB\u8F38\u5165\u5BC6\u78BC","hide-hint":"",filled:"",dense:"","hide-bottom-space":"",maxlength:"20"},{prepend:t(()=>[e(b,{name:"vpn_key"})]),_:1},8,["modelValue","rules"])]),_:1}),e(w,{class:"q-mt-md q-px-lg",vertical:""},{default:t(()=>[e(d,{label:"LOGIN",type:"submit",color:"secondary","text-color":"dark",class:"text-weight-bold"}),e(w,{align:"center"},{default:t(()=>[e(d,{label:"\u5FEB\u901F\u767B\u5165","text-color":"white",flat:""}),e(d,{label:"\u8A3B\u518A\u6703\u54E1","text-color":"white",to:"/register",flat:""})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])])]))}};var fe=C(W,[["__scopeId","data-v-0c56e18b"]]);export{fe as default};
