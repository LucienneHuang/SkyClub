import{Q as M}from"./use-fullscreen.1bc89a11.js";import{a as L,Q as i}from"./QCard.4528cd4f.js";import{Q as n}from"./QInput.ee2154f9.js";import{Q as A}from"./QImg.43a9ac70.js";import{_ as T,s as f,a8 as U,b as $,o as u,c as h,f as t,k as o,e as d,F as C,a0 as z,aS as j,r as F,i as E,z as O,X as V,Q as W,Z as N,t as x,a2 as P,a3 as R,a1 as X}from"./index.d0f83ca1.js";import{Q as Z}from"./QCardActions.68bf7a93.js";import{Q as G}from"./QForm.5fe23f06.js";import{Q as H}from"./QDialog.1f26ab03.js";import{Q as J,a as K,b}from"./QResponsive.25be03c4.js";import{C as Y}from"./ClosePopup.ac58146b.js";import{u as ee}from"./use-quasar.9f72b85f.js";/* empty css                */import"./use-dark.6d2b0e39.js";import"./focus-manager.a1b6aa0a.js";import"./use-ratio.af5d21a3.js";import"./use-prevent-scroll.c4531eda.js";import"./scroll.43b46a8d.js";import"./focusout.259141dd.js";import"./QList.d91a0bfb.js";import"./QMarkupTable.eb1b27bc.js";import"./QSelect.6ca2be05.js";import"./QChip.705432ab.js";import"./QItem.823ab31f.js";import"./QMenu.b6cc8fb7.js";import"./rtl.b51694b1.js";import"./format.865294d5.js";const s=c=>(P("data-v-5009f455"),c=c(),R(),c),te={id:"form"},le=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg text-h6"},"\u51FA\u8CA8",-1)),oe=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u8A02\u55AE\u7DE8\u865F",-1)),ae=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u8CE3\u5BB6\uFF29\uFF24 ",-1)),re=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u8CB7\u5BB6\u59D3\u540D",-1)),de=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u8CB7\u5BB6\u96FB\u8A71",-1)),se=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u806F\u7D61\u65B9\u5F0F",-1)),ne=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u5546\u54C1\u7E3D\u984D",-1)),ie=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u8A02\u55AE\u65E5\u671F",-1)),me=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u4ED8\u6B3E\u65B9\u5F0F",-1)),ue={class:"text-center"},ce=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u5546\u54C1\u540D\u7A31",-1)),pe=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u6578\u91CF",-1)),ye=s(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u55AE\u50F9",-1)),_e=s(()=>d("div",{id:"title",class:"q-ml-xl q-my-lg q-pl-lg q-py-sm text-h4 text-weight-bold non-selectable"},"\u51FA\u552E\u8A02\u55AE\u7BA1\u7406",-1)),fe={id:"container",class:"flex justify-center q-px-xl q-pb-xl"},he={key:0},be={key:1},ve={__name:"MemberSalesManagement",setup(c){const q=ee(),v=f(""),p=f(!1),S=[{name:"datedetail",required:!0,label:"\u4EA4\u6613\u65E5\u671F",align:"center",field:"datedetail",sortable:!0},{name:"_id",required:!0,label:"\u8A02\u55AE\u7DE8\u865F",align:"center",field:"_id",sortable:!1},{name:"buyer",required:!0,label:"\u8CB7\u5BB6",align:"center",field:"buyer",sortable:!1},{name:"total",required:!0,label:"\u7E3D\u91D1\u984D",align:"center",field:"total",sortable:!1},{name:"check",required:!0,label:"\u51FA\u8CA8\u72C0\u614B",align:"center",field:"check",sortable:!1},{name:"detail",required:!0,label:"\u8A73\u7D30\u8CC7\u8A0A",align:"center",field:"detail",sortable:!1}],g=U([]),w=async()=>{try{const{data:r}=await z.get("/orders/sell");g.splice(0,g.length,...r.result)}catch(r){console.log(r),q.notify({type:"negative",message:r.response.data.message})}};w();const l=U({_id:"",buyer:"",realName:"",phoneNumber:"",address:"",payment:"",total:"",date:"",cart:[],check:!1}),D=r=>{p.value=!0,l._id=r._id,l.buyer=r.user.nickname+`\uFF08${r.user._id}\uFF09`,l.realName=r.realName,l.phoneNumber=r.phoneNumber,l.address=r.address,l.payment=r.payment,l.total=r.total,l.check=r.check,l.date=new Date(r.date).toLocaleString(),l.cart=[...r.cart]},I=async()=>{try{await z.patch("/orders/"+l._id,l),await X.fire({icon:"success",title:"\u66F4\u65B0\u6210\u529F",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"},iconColor:"#A6D8D4",confirmButtonColor:"#A6D8D4",width:"20rem"}),w()}catch(r){q.notify({type:"negative",message:r.response.data.message})}},y=f(""),_=f(""),k=()=>{window.innerWidth>975?(y.value=12,_.value=5):window.innerWidth>1200?(y.value=5,_.value=5):(y.value=2,_.value=2)};return k(),window.addEventListener("resize",()=>{k()}),(r,a)=>{const B=$("router-link");return u(),h(C,null,[t(H,{modelValue:p.value,"onUpdate:modelValue":a[10]||(a[10]=e=>p.value=e)},{default:o(()=>[d("div",te,[t(G,{onSubmit:j(I,["prevent"])},{default:o(()=>[t(L,null,{default:o(()=>[t(i,null,{default:o(()=>[t(i,{horizontal:"",class:"flex justify-center"},{default:o(()=>[le,t(M,{style:{"margin-top":"12px"},color:"secondary",modelValue:l.check,"onUpdate:modelValue":a[0]||(a[0]=e=>l.check=e)},null,8,["modelValue"])]),_:1}),t(i,{horizontal:""},{default:o(()=>[oe,t(n,{type:"text",readonly:"",modelValue:l._id,"onUpdate:modelValue":a[1]||(a[1]=e=>l._id=e),color:"secondary"},null,8,["modelValue"])]),_:1}),t(i,{horizontal:""},{default:o(()=>[ae,t(n,{type:"text",readonly:"",modelValue:l.buyer,"onUpdate:modelValue":a[2]||(a[2]=e=>l.buyer=e),color:"secondary"},null,8,["modelValue"])]),_:1}),t(i,{horizontal:"",class:"two"},{default:o(()=>[re,t(n,{type:"text",readonly:"",modelValue:l.realName,"onUpdate:modelValue":a[3]||(a[3]=e=>l.realName=e),color:"secondary"},null,8,["modelValue"]),de,t(n,{type:"text",readonly:"",modelValue:l.phoneNumber,"onUpdate:modelValue":a[4]||(a[4]=e=>l.phoneNumber=e),color:"secondary"},null,8,["modelValue"])]),_:1}),t(i,{horizontal:""},{default:o(()=>[se,t(n,{type:"text",readonly:"",modelValue:l.address,"onUpdate:modelValue":a[5]||(a[5]=e=>l.address=e),color:"secondary"},null,8,["modelValue"])]),_:1}),t(i,{horizontal:"",class:"two"},{default:o(()=>[ne,t(n,{type:"text",readonly:"",modelValue:l.total,"onUpdate:modelValue":a[6]||(a[6]=e=>l.total=e),color:"secondary"},null,8,["modelValue"]),ie,t(n,{type:"text",readonly:"",modelValue:l.date,"onUpdate:modelValue":a[7]||(a[7]=e=>l.date=e),color:"secondary"},null,8,["modelValue"])]),_:1}),t(i,{horizontal:"",class:"q-mb-sm"},{default:o(()=>[me,t(n,{type:"text",readonly:"",modelValue:l.payment,"onUpdate:modelValue":a[8]||(a[8]=e=>l.payment=e),color:"secondary"},null,8,["modelValue"])]),_:1}),(u(!0),h(C,null,F(l.cart,(e,Q)=>(u(),E(i,{key:Q,style:{background:"rgb(228, 228, 228)"},class:"q-mb-md"},{default:o(()=>[d("div",ue,[t(B,{to:"/trade/"+e.product._id},{default:o(()=>[t(A,{src:e.product.image,style:{width:"150px",height:"120px"}},null,8,["src"])]),_:2},1032,["to"])]),t(i,{horizontal:""},{default:o(()=>[ce,t(n,{type:"text",readonly:"",modelValue:e.product.name,"onUpdate:modelValue":m=>e.product.name=m,color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(i,{horizontal:"",class:"two"},{default:o(()=>[pe,t(n,{type:"text",readonly:"",modelValue:e.quantity,"onUpdate:modelValue":m=>e.quantity=m,color:"secondary"},null,8,["modelValue","onUpdate:modelValue"]),ye,t(n,{type:"text",readonly:"",modelValue:e.product.price,"onUpdate:modelValue":m=>e.product.price=m,color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Z,{class:"flex justify-center q-mb-md"},{default:o(()=>[O(t(V,{type:"submit",unelevated:"",rounded:"",style:{width:"6rem"},size:"1rem",color:"secondary",label:"\u9001\u51FA"},null,512),[[Y]]),t(V,{unelevated:"",rounded:"",style:{width:"6rem"},size:"1rem",outline:"",color:"secondary",label:"\u53D6\u6D88",onClick:a[9]||(a[9]=e=>p.value=!1)})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])]),_:1},8,["modelValue"]),_e,d("div",fe,[t(J,{id:"wh",ratio:y.value/_.value},{default:o(()=>[t(K,{columns:S,"row-key":"name",rows:g,filter:v.value,"rows-per-page-options":[10,0]},{"top-right":o(()=>[t(n,{color:"white",filled:"",clearable:"",borderless:"",dense:"",debounce:"300",modelValue:v.value,"onUpdate:modelValue":a[11]||(a[11]=e=>v.value=e),placeholder:"\u8ACB\u8F38\u5165\u8A02\u55AE\u7DE8\u865F"},{append:o(()=>[t(W,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-buyer":o(e=>[t(b,{props:e},{default:o(()=>[N(x(e.row.user.nickname)+" \uFF08"+x(e.row.user._id)+"\uFF09 ",1)]),_:2},1032,["props"])]),"body-cell-datedetail":o(e=>[t(b,{props:e},{default:o(()=>[N(x(new Date(e.row.date).toLocaleString()),1)]),_:2},1032,["props"])]),"body-cell-check":o(e=>[t(b,{props:e},{default:o(()=>[e.value?(u(),h("div",he,"\u5DF2\u51FA\u8CA8")):(u(),h("div",be,"\u6E96\u5099\u4E2D"))]),_:2},1032,["props"])]),"body-cell-detail":o(e=>[t(b,{props:e},{default:o(()=>[t(V,{round:"",color:"secondary",onClick:Q=>D(e.row),icon:"mdi-file-document-edit"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]),_:1},8,["ratio"])])],64)}}};var Re=T(ve,[["__scopeId","data-v-5009f455"]]);export{Re as default};
