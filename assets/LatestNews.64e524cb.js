import{Q as y,a as _}from"./QBreadcrumbs.45ffc55b.js";import{s as r,K as p,o as g,c as v,e as d,f as t,k as c,a0 as f,F as b,r as k,ay as q,Q as P,az as N}from"./index.3e74cfcf.js";import{Q as V}from"./QInput.bdcae9aa.js";import{Q as x}from"./QChip.cd68af02.js";import{Q as O}from"./QPagination.c8db671f.js";import{u as B}from"./use-quasar.625d2e98.js";import{Q as C}from"./QSpinnerHearts.54537785.js";import{N as z}from"./NewsCard.dd16f91a.js";import"./use-dark.46b9fe3c.js";import"./focus-manager.a1b6aa0a.js";import"./format.865294d5.js";import"./QImg.667e0f02.js";import"./use-ratio.8b828574.js";import"./QCard.59f60977.js";const S={id:"container",class:"q-ma-md"},$={id:"head",class:"q-my-md"},E={id:"title",class:"text-weight-bold non-selectable q-mt-md q-pl-md flex"},F={class:"q-mt-md q-ml-lg"},H={class:"q-pa-lg flex flex-center"},Z={__name:"LatestNews",setup(I){const l=B(),m=r([]),u=r("desc"),h=r(0),Q=r(5),o=r(1),n=r(""),i=async()=>{try{l.loading.show({spinner:C,spinnerSize:140,message:"<h6>\u8CC7\u6599\u8F09\u5165\u4E2D\uFF0C\u8ACB\u8010\u5FC3\u7B49\u5019...</h6>",html:!0});const{data:a}=await q.get("/articles/getNews",{params:{currentPage:o.value,articlesPerPage:Q.value,sortOrder:u.value,search:n.value}});m.value.splice(0,m.value.length,...a.result.data),h.value=a.result.count,l.loading.hide()}catch{l.loading.hide(),l.notify({type:"negative",message:"\u767C\u751F\u932F\u8AA4"})}};i();const w=a=>{u.value=a};return p(o,async(a,e)=>{i(),window.scrollTo(0,0)}),p(u,async(a,e)=>{o.value=1,i()}),p(n,async(a,e)=>{o.value=1,i()}),(a,e)=>(g(),v("div",S,[d("div",$,[t(y,null,{default:c(()=>[t(_,{label:"Home",to:"/"}),t(_,{label:"\u6700\u65B0\u6D88\u606F"})]),_:1}),d("div",E,[f("\u6700\u65B0\u6D88\u606F "),t(V,{class:"q-ml-md q-mt-sm",rounded:"",outlined:"",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),color:"accent",label:"\u8ACB\u8F38\u5165\u6587\u7AE0\u95DC\u9375\u5B57"},{append:c(()=>[t(P,{name:"search",color:"accent",size:"2.5rem"})]),_:1},8,["modelValue"])]),d("div",F,[t(x,{clickable:"",onClick:e[1]||(e[1]=s=>w("decs")),color:"accent","text-color":"white"},{default:c(()=>[f(" \u6700\u65B0 ")]),_:1}),t(x,{clickable:"",onClick:e[2]||(e[2]=s=>w("asc")),color:"accent","text-color":"white"},{default:c(()=>[f(" \u6700\u820A ")]),_:1})])]),(g(!0),v(b,null,k(m.value,s=>(g(),v("div",{id:"section",class:"flex justify-center q-my-xl",key:s._id},[t(z,N(s,{"data-aos":"fade-up","data-aos-duration":"800","data-aos-easing":"ease-in-out-back"}),null,16)]))),128)),d("div",H,[t(O,{modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value=s),max:h.value,"boundary-links":"","direction-links":""},null,8,["modelValue","max"])])]))}};export{Z as default};
