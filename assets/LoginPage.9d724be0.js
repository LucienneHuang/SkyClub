import{_ as C,aC as V,Z as F,a8 as I,o as h,c as g,e as i,f as e,k as a,aS as B,W as u,X as L,a1 as A,a0 as p,F as N,r as P,t as U,Q as b,a4 as E,a5 as z,ay as D,a3 as Q}from"./index.3e74cfcf.js";import{Q as _,a as f}from"./QItem.fe02d7d6.js";import{Q as M,a as x}from"./QList.53f8e79c.js";import{Q as O}from"./QMenu.a6357b24.js";import{Q as T}from"./QToolbar.aaf1c340.js";import{a as j,Q as r}from"./QCard.59f60977.js";import{Q as w}from"./QInput.bdcae9aa.js";import{Q as v}from"./QCardActions.d993bd3b.js";import{Q as G}from"./QForm.76f56f89.js";import{v as H}from"./index.6da2ed9f.js";import{u as R}from"./use-quasar.625d2e98.js";import{Q as W}from"./QSpinnerHearts.54537785.js";import"./use-dark.46b9fe3c.js";import"./use-model-toggle.ed581fea.js";import"./focusout.13baf777.js";import"./focus-manager.a1b6aa0a.js";const k=n=>(E("data-v-11e7e743"),n=n(),z(),n),X={class:"container"},Z={class:"bg_effect"},$=k(()=>i("div",{id:"star"},null,-1)),J=["src"],K={class:"row flex-center login"},Y=k(()=>i("div",{class:"title text-center text-h4 q-py-md non-selectable"},"\u767B\u5165\u6703\u54E1",-1)),ee={__name:"LoginPage",setup(n){const d=R(),y=V(),m=F(),s=I({email:"",password:""}),o={required:t=>!!t||"\u6B04\u4F4D\u5FC5\u586B",email:t=>H.isEmail(t)||"\u4FE1\u7BB1\u683C\u5F0F\u932F\u8AA4",min:t=>t.length>=4||"\u9577\u5EA6\u5FC5\u9808\u5927\u65BC 4 \u500B\u5B57",max:t=>t.length<=20||"\u9577\u5EA6\u5FC5\u9808\u5C0F\u65BC 20 \u500B\u5B57"},q=async()=>{try{d.loading.show({spinner:W,spinnerSize:140,message:"<h6>\u767B\u5165\u4E2D\uFF0C\u8ACB\u8010\u5FC3\u7B49\u5019...</h6>",html:!0});const{data:t}=await D.post("/users/login",s);d.loading.hide(),await Q.fire({icon:"success",title:"\u767B\u5165\u6210\u529F",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"},iconColor:"#F198AF",confirmButtonColor:"#F198AF",width:"20rem"}),m.login({user:t.result.user,token:t.result.token,email:t.result.email,nickname:t.result.nickname,avatar:t.result.avatar,cart:t.result.cart,role:t.result.role,block:t.result.block}),m.isBlock&&await Q.fire({icon:"warning",title:"\u5E33\u865F\u505C\u6B0A\u4E2D",text:"\u66AB\u6642\u95DC\u9589\u4EA4\u6613\u529F\u80FD\uFF0C\u5DF2\u5B8C\u6210\u7684\u8A02\u55AE\u4E0D\u53D7\u5F71\u97FF\u3002",iconColor:"#ff0000",confirmButtonColor:"#ff0000",width:"30rem"}),y.push("/")}catch(t){d.loading.hide(),d.notify({type:"negative",message:t.response.data.message})}},S=[{to:"/latestnews",label:"\u6700\u65B0\u6D88\u606F",icon:"announcement"},{to:"/realms",label:"\u5340\u57DF\u4ECB\u7D39",icon:"location_on"},{to:"/trade",label:"\u4EA4\u6613\u5C08\u5340",icon:"local_mall"},{to:"/contact",label:"\u806F\u7D61\u6211\u5011",icon:"call"}];return(t,c)=>(h(),g("div",X,[i("div",Z,[$,e(T,{class:"text-white q-px-lg q-pt-md",style:{height:"50px"}},{default:a(()=>[e(u,{class:"q-ml-auto",flat:"",round:"",dense:""},{default:a(()=>[e(L,null,{default:a(()=>[i("img",{src:A(m).avatar},null,8,J)]),_:1}),e(O,{square:"",class:"bg-primary text-center"},{default:a(()=>[e(M,{dense:""},{default:a(()=>[e(_,{clickable:""},{default:a(()=>[e(f,null,{default:a(()=>[p("\u904A\u5BA2")]),_:1})]),_:1}),e(x,{inset:""}),(h(),g(N,null,P(S,l=>e(_,{clickable:"",to:l.to,key:l.to},{default:a(()=>[e(f,null,{default:a(()=>[p(U(l.label),1)]),_:2},1024)]),_:2},1032,["to"])),64)),e(x,{inset:""}),e(_,{clickable:"",to:"/"},{default:a(()=>[e(f,null,{default:a(()=>[p("\u56DE\u9996\u9801")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i("div",K,[e(G,{onSubmit:B(q,["prevent"])},{default:a(()=>[e(j,null,{default:a(()=>[e(r,{horizontal:""},{default:a(()=>[e(r,{class:"left"}),e(r,{class:"right flex column justify-center"},{default:a(()=>[e(r,null,{default:a(()=>[Y,e(w,{modelValue:s.email,"onUpdate:modelValue":c[0]||(c[0]=l=>s.email=l),rules:[o.required,o.email],dark:"",class:"q-mb-xs",type:"email",label:"Email",hint:"\u8ACB\u8F38\u5165\u4FE1\u7BB1","hide-hint":"",filled:"",dense:"",clearable:"","hide-bottom-space":"","clear-icon":"backspace"},{prepend:a(()=>[e(b,{name:"mail"})]),_:1},8,["modelValue","rules"])]),_:1}),e(r,null,{default:a(()=>[e(w,{modelValue:s.password,"onUpdate:modelValue":c[1]||(c[1]=l=>s.password=l),rules:[o.required,o.min,o.max],dark:"",class:"q-mb-xs",type:"password",label:"Password",hint:"\u8ACB\u8F38\u5165\u5BC6\u78BC","hide-hint":"",filled:"",dense:"","hide-bottom-space":"",maxlength:"20"},{prepend:a(()=>[e(b,{name:"vpn_key"})]),_:1},8,["modelValue","rules"])]),_:1}),e(v,{class:"q-mt-md q-px-lg",vertical:""},{default:a(()=>[e(u,{label:"LOGIN",type:"submit",color:"secondary","text-color":"dark",class:"text-weight-bold"}),e(v,{align:"center"},{default:a(()=>[e(u,{label:"\u8A3B\u518A\u6703\u54E1","text-color":"white",to:"/register",flat:""})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])])]))}};var ge=C(ee,[["__scopeId","data-v-11e7e743"]]);export{ge as default};
