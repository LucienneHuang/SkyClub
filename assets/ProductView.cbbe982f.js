import{a as R,Q as w}from"./QCard.ba089e82.js";import{_ as J,aQ as W,s as D,aD as ee,o as M,c as j,f as o,k as u,e as _,t as A,F as U,Z as P,z as ae,X,i as E,$ as T,r as te,aS as le,a0 as se,a1 as ie,a2 as ne,a3 as re}from"./index.c8f9d440.js";import{Q as oe}from"./QCardActions.8d6a0330.js";import{Q as ce}from"./QDialog.ecfd1e3a.js";import{Q as de,a as N}from"./QBreadcrumbs.f16f0441.js";import{Q as V}from"./QImg.08cde18d.js";import{Q as pe}from"./QChip.4887a838.js";import{a as ue}from"./QScrollArea.aba11d87.js";import{Q as me}from"./QInput.77b6713d.js";import{Q as fe}from"./QForm.a35d9800.js";import{C as ge}from"./ClosePopup.529459c1.js";import{u as ve}from"./use-quasar.38f3816b.js";/* empty css                */import{e as he,c as ye,b as be,d as Y,f as Ce,a as K,S as _e,A as xe}from"./swiper.160f55f6.js";/* empty css                   */import"./use-dark.b556ecaa.js";import"./use-prevent-scroll.3ca7a14d.js";import"./scroll.beb93c22.js";import"./focusout.dd8c9852.js";import"./focus-manager.a1b6aa0a.js";import"./use-ratio.a95bd297.js";import"./format.865294d5.js";function $e(h,e,L,m){return h.params.createElements&&Object.keys(m).forEach(p=>{if(!L[p]&&L.auto===!0){let r=he(h.el,`.${m[p]}`)[0];r||(r=ye("div",m[p]),r.className=m[p],h.el.append(r)),L[p]=r,e[p]=r}}),L}function z(h){return h===void 0&&(h=""),`.${h.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Le(h){let{swiper:e,extendParams:L,on:m,emit:p}=h;const r="swiper-pagination";L({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:a=>a,formatFractionTotal:a=>a,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),e.pagination={el:null,bullets:[]};let $,C=0;const s=a=>(Array.isArray(a)?a:[a]).filter(t=>!!t);function k(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function i(a,t){const{bulletActiveClass:l}=e.params.pagination;!a||(a=a[`${t==="prev"?"previous":"next"}ElementSibling`],a&&(a.classList.add(`${l}-${t}`),a=a[`${t==="prev"?"previous":"next"}ElementSibling`],a&&a.classList.add(`${l}-${t}-${t}`)))}function B(a){const t=a.target.closest(z(e.params.pagination.bulletClass));if(!t)return;a.preventDefault();const l=Y(t)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===l)return;const n=e.getSlideIndexByData(l),f=e.getSlideIndexByData(e.realIndex);n>e.slides.length-e.loopedSlides&&e.loopFix({direction:n>f?"next":"prev",activeSlideIndex:n,slideTo:!1}),e.slideToLoop(l)}else e.slideTo(l)}function y(){const a=e.rtl,t=e.params.pagination;if(k())return;let l=e.pagination.el;l=s(l);let n,f;const S=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,F=e.params.loop?Math.ceil(S/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(f=e.previousRealIndex||0,n=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex!="undefined"?(n=e.snapIndex,f=e.previousSnapIndex):(f=e.previousIndex||0,n=e.activeIndex||0),t.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const c=e.pagination.bullets;let x,b,q;if(t.dynamicBullets&&($=be(c[0],e.isHorizontal()?"width":"height",!0),l.forEach(d=>{d.style[e.isHorizontal()?"width":"height"]=`${$*(t.dynamicMainBullets+4)}px`}),t.dynamicMainBullets>1&&f!==void 0&&(C+=n-(f||0),C>t.dynamicMainBullets-1?C=t.dynamicMainBullets-1:C<0&&(C=0)),x=Math.max(n-C,0),b=x+(Math.min(c.length,t.dynamicMainBullets)-1),q=(b+x)/2),c.forEach(d=>{const g=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(v=>`${t.bulletActiveClass}${v}`)].map(v=>typeof v=="string"&&v.includes(" ")?v.split(" "):v).flat();d.classList.remove(...g)}),l.length>1)c.forEach(d=>{const g=Y(d);g===n?d.classList.add(...t.bulletActiveClass.split(" ")):e.isElement&&d.setAttribute("part","bullet"),t.dynamicBullets&&(g>=x&&g<=b&&d.classList.add(...`${t.bulletActiveClass}-main`.split(" ")),g===x&&i(d,"prev"),g===b&&i(d,"next"))});else{const d=c[n];if(d&&d.classList.add(...t.bulletActiveClass.split(" ")),e.isElement&&c.forEach((g,v)=>{g.setAttribute("part",v===n?"bullet-active":"bullet")}),t.dynamicBullets){const g=c[x],v=c[b];for(let I=x;I<=b;I+=1)c[I]&&c[I].classList.add(...`${t.bulletActiveClass}-main`.split(" "));i(g,"prev"),i(v,"next")}}if(t.dynamicBullets){const d=Math.min(c.length,t.dynamicMainBullets+4),g=($*d-$)/2-q*$,v=a?"right":"left";c.forEach(I=>{I.style[e.isHorizontal()?v:"top"]=`${g}px`})}}l.forEach((c,x)=>{if(t.type==="fraction"&&(c.querySelectorAll(z(t.currentClass)).forEach(b=>{b.textContent=t.formatFractionCurrent(n+1)}),c.querySelectorAll(z(t.totalClass)).forEach(b=>{b.textContent=t.formatFractionTotal(F)})),t.type==="progressbar"){let b;t.progressbarOpposite?b=e.isHorizontal()?"vertical":"horizontal":b=e.isHorizontal()?"horizontal":"vertical";const q=(n+1)/F;let d=1,g=1;b==="horizontal"?d=q:g=q,c.querySelectorAll(z(t.progressbarFillClass)).forEach(v=>{v.style.transform=`translate3d(0,0,0) scaleX(${d}) scaleY(${g})`,v.style.transitionDuration=`${e.params.speed}ms`})}t.type==="custom"&&t.renderCustom?(c.innerHTML=t.renderCustom(e,n+1,F),x===0&&p("paginationRender",c)):(x===0&&p("paginationRender",c),p("paginationUpdate",c)),e.params.watchOverflow&&e.enabled&&c.classList[e.isLocked?"add":"remove"](t.lockClass)})}function Q(){const a=e.params.pagination;if(k())return;const t=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let l=e.pagination.el;l=s(l);let n="";if(a.type==="bullets"){let f=e.params.loop?Math.ceil(t/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&f>t&&(f=t);for(let S=0;S<f;S+=1)a.renderBullet?n+=a.renderBullet.call(e,S,a.bulletClass):n+=`<${a.bulletElement} ${e.isElement?'part="bullet"':""} class="${a.bulletClass}"></${a.bulletElement}>`}a.type==="fraction"&&(a.renderFraction?n=a.renderFraction.call(e,a.currentClass,a.totalClass):n=`<span class="${a.currentClass}"></span> / <span class="${a.totalClass}"></span>`),a.type==="progressbar"&&(a.renderProgressbar?n=a.renderProgressbar.call(e,a.progressbarFillClass):n=`<span class="${a.progressbarFillClass}"></span>`),e.pagination.bullets=[],l.forEach(f=>{a.type!=="custom"&&(f.innerHTML=n||""),a.type==="bullets"&&e.pagination.bullets.push(...f.querySelectorAll(z(a.bulletClass)))}),a.type!=="custom"&&p("paginationRender",l[0])}function O(){e.params.pagination=$e(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const a=e.params.pagination;if(!a.el)return;let t;typeof a.el=="string"&&e.isElement&&(t=e.el.querySelector(a.el)),!t&&typeof a.el=="string"&&(t=[...document.querySelectorAll(a.el)]),t||(t=a.el),!(!t||t.length===0)&&(e.params.uniqueNavElements&&typeof a.el=="string"&&Array.isArray(t)&&t.length>1&&(t=[...e.el.querySelectorAll(a.el)],t.length>1&&(t=t.filter(l=>Ce(l,".swiper")[0]===e.el)[0])),Array.isArray(t)&&t.length===1&&(t=t[0]),Object.assign(e.pagination,{el:t}),t=s(t),t.forEach(l=>{a.type==="bullets"&&a.clickable&&l.classList.add(a.clickableClass),l.classList.add(a.modifierClass+a.type),l.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.type==="bullets"&&a.dynamicBullets&&(l.classList.add(`${a.modifierClass}${a.type}-dynamic`),C=0,a.dynamicMainBullets<1&&(a.dynamicMainBullets=1)),a.type==="progressbar"&&a.progressbarOpposite&&l.classList.add(a.progressbarOppositeClass),a.clickable&&l.addEventListener("click",B),e.enabled||l.classList.add(a.lockClass)}))}function H(){const a=e.params.pagination;if(k())return;let t=e.pagination.el;t&&(t=s(t),t.forEach(l=>{l.classList.remove(a.hiddenClass),l.classList.remove(a.modifierClass+a.type),l.classList.remove(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.clickable&&l.removeEventListener("click",B)})),e.pagination.bullets&&e.pagination.bullets.forEach(l=>l.classList.remove(...a.bulletActiveClass.split(" ")))}m("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const a=e.params.pagination;let{el:t}=e.pagination;t=s(t),t.forEach(l=>{l.classList.remove(a.horizontalClass,a.verticalClass),l.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass)})}),m("init",()=>{e.params.pagination.enabled===!1?G():(O(),Q(),y())}),m("activeIndexChange",()=>{typeof e.snapIndex=="undefined"&&y()}),m("snapIndexChange",()=>{y()}),m("snapGridLengthChange",()=>{Q(),y()}),m("destroy",()=>{H()}),m("enable disable",()=>{let{el:a}=e.pagination;a&&(a=s(a),a.forEach(t=>t.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),m("lock unlock",()=>{y()}),m("click",(a,t)=>{const l=t.target,n=s(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&n&&n.length>0&&!l.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&l===e.navigation.nextEl||e.navigation.prevEl&&l===e.navigation.prevEl))return;const f=n[0].classList.contains(e.params.pagination.hiddenClass);p(f===!0?"paginationShow":"paginationHide"),n.forEach(S=>S.classList.toggle(e.params.pagination.hiddenClass))}});const Z=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=s(a),a.forEach(t=>t.classList.remove(e.params.pagination.paginationDisabledClass))),O(),Q(),y()},G=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=s(a),a.forEach(t=>t.classList.add(e.params.pagination.paginationDisabledClass))),H()};Object.assign(e.pagination,{enable:Z,disable:G,render:Q,update:y,init:O,destroy:H})}const Be=h=>(ne("data-v-74efbf57"),h=h(),re(),h),Se=Be(()=>_("div",{class:"text-h5 text-center"},"\u5546\u54C1\u5DF2\u4E0B\u67B6",-1)),Ae={id:"container"},Ie={id:"head",class:"q-mt-md"},we={id:"title",class:"text-weight-bold non-selectable q-mt-md q-pl-md"},Me={id:"section",class:"flex justify-center"},ke={class:"name text-weight-bold q-mb-md"},qe={class:"q-mb-sm"},ze={class:"price text-weight-bold text-red-14"},Qe=["innerHTML"],De={class:"flex justify-center items-center"},Ee={__name:"ProductView",setup(h){const e=ve(),L=W(),m=[xe,Le],p=D(!1),r=D(!1),$=D(1),C={required:i=>!!i||"\u6B04\u4F4D\u5FC5\u586B\uFF0C\u4E14\u4E0D\u5F97\u70BA 0",numberRequired:i=>!isNaN(i)&&i>0||"\u4E0D\u5F97\u5C0F\u65BC 0",limited:i=>i<=s.value.MaxNumber||"\u8D85\u904E\u5546\u54C1\u5269\u9918\u6578\u91CF"},s=D({_id:"",seller:"",sellername:"",name:"",price:0,currency:"",MaxNumber:0,image:"",images:[],description:"",category:"",sell:!0});(async()=>{try{const{data:i}=await ee.get("/products/"+L.params.id);s.value._id=i.result._id,s.value.seller=i.result.user._id,s.value.sellername=i.result.user.nickname,s.value.name=i.result.name,s.value.price=i.result.price,s.value.currency=i.result.currency,s.value.MaxNumber=i.result.MaxNumber,s.value.image=i.result.image,s.value.images=[...i.result.images],s.value.description=i.result.description,s.value.category=i.result.category,s.value.sell=i.result.sell,s.value.sell===!1&&(p.value=!0)}catch{e.notify({type:"negative",message:"\u767C\u751F\u932F\u8AA4"})}})();const k=async()=>{try{r.value=!0,await se.post("/users/cart",{product:s.value._id,seller:s.value.seller,quantity:$.value}),r.value=!1,await ie.fire({icon:"success",title:"\u65B0\u589E\u8CFC\u7269\u8ECA\u6210\u529F",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"},iconColor:"#B0A9EC",confirmButtonColor:"#B0A9EC",width:"20rem"})}catch(i){r.value=!1,e.notify({type:"negative",message:i.response.data.message})}};return(i,B)=>(M(),j(U,null,[o(ce,{modelValue:p.value,"onUpdate:modelValue":B[0]||(B[0]=y=>p.value=y),persistent:""},{default:u(()=>[o(R,{style:{width:"20rem"},class:"q-py-md"},{default:u(()=>[o(w,null,{default:u(()=>[Se]),_:1}),o(w,{class:"q-pt-none text-h6 text-center"},{default:u(()=>[P(" \uFF0D\u5373\u5C07\u8DF3\u8F49\u5230\u4EA4\u6613\u4E3B\u9801\uFF0D ")]),_:1}),o(oe,{align:"center"},{default:u(()=>[ae(o(X,{label:"OK",to:"/trade",color:"primary"},null,512),[[ge]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),_("div",Ae,[_("div",Ie,[o(de,null,{default:u(()=>[o(N,{label:"Home",to:"/"}),o(N,{label:"\u4EA4\u6613",to:"/trade"}),o(N,{label:"\u5546\u54C1\u8CC7\u8A0A"})]),_:1}),_("div",we,A(s.value.name),1)]),_("div",Me,[o(R,null,{default:u(()=>[o(w,{horizontal:"",class:"all"},{default:u(()=>[o(w,{class:"left"},{default:u(()=>[s.value.images.length!==0?(M(),E(T(_e),{key:0,modules:m,loop:!0,pagination:{clickable:!0},autoplay:{delay:4e3,disableOnInteraction:!1}},{default:u(()=>[(M(),E(T(K),{key:s.value.image},{default:u(()=>[o(V,{src:s.value.image},null,8,["src"])]),_:1})),(M(!0),j(U,null,te(s.value.images,y=>(M(),E(T(K),{key:y},{default:u(()=>[o(V,{src:y},null,8,["src"])]),_:2},1024))),128))]),_:1})):(M(),E(V,{key:1,src:s.value.image},null,8,["src"]))]),_:1}),o(w,{class:"right q-my-sm q-px-lg"},{default:u(()=>[o(pe,{color:"primary","text-color":"white",icon:"mdi-tag"},{default:u(()=>[P(A(s.value.category),1)]),_:1}),_("div",ke,A(s.value.name),1),_("div",qe,"\u8CE3\u5BB6:\xA0"+A(s.value.sellername)+"\uFF08"+A(s.value.seller)+"\uFF09",1),_("div",null,"\u5269\u9918\u6578\u91CF\uFF1A "+A(s.value.MaxNumber),1),_("div",ze,"NT.\xA0"+A(s.value.price)+"\xA0",1),o(ue,{class:"scroll"},{default:u(()=>[_("div",{innerHTML:s.value.description,class:"q-mt-md description",style:{"font-size":"1.6rem"}},null,8,Qe)]),_:1}),o(fe,{onSubmit:le(k,["prevent"])},{default:u(()=>[_("div",null,[P(" \u8CFC\u8CB7\u6578\u91CF\uFF1A "),o(me,{rules:[C.required,C.numberRequired,C,C.limited],modelValue:$.value,"onUpdate:modelValue":B[1]||(B[1]=y=>$.value=y),modelModifiers:{number:!0},type:"number",style:{"max-width":"200px"}},null,8,["rules","modelValue"])]),o(w,null,{default:u(()=>[_("div",De,[o(X,{type:"submit",class:"buy",rounded:"",label:"Add To Cart",color:"accent",loading:r.value},null,8,["loading"])])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})])])],64))}};var ia=J(Ee,[["__scopeId","data-v-74efbf57"]]);export{ia as default};
