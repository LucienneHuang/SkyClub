import{Q as v}from"./QInput.9dfdd6e7.js";import{a as N,Q as u}from"./QCard.ef6a8fa2.js";import{Q as w}from"./QSelect.368292e7.js";import{Q as k}from"./QEditor.2e4a4541.js";import{Q as F}from"./use-fullscreen.ec48d013.js";import{_ as U,V as B,aF as A,s as y,a8 as I,b as R,o as z,c as D,e as d,f as a,k as l,aS as P,F as T,$ as n,X as q,i as O,a as E,a2 as L,a3 as $,a0 as G,a1 as J}from"./index.86195e65.js";import{Q as M}from"./QCardActions.97f7b58d.js";import{Q as X}from"./QForm.904c8ccc.js";/* empty css                */import{u as H}from"./use-quasar.efd42418.js";import"./use-dark.975c49a2.js";import"./focus-manager.a1b6aa0a.js";import"./QChip.9394397d.js";import"./QItem.63c0e686.js";import"./QMenu.2728515c.js";import"./scroll.af5e9120.js";import"./focusout.033f2562.js";import"./QDialog.fc01f597.js";import"./use-prevent-scroll.0e2f263f.js";import"./rtl.b51694b1.js";import"./format.865294d5.js";const m=c=>(L("data-v-718d8996"),c=c(),$(),c),K=m(()=>d("div",{id:"title",class:"q-ml-xl q-my-lg q-pl-lg q-py-sm text-h4 text-weight-bold non-selectable"},"\u65B0\u589E\u5546\u54C1 ",-1)),W={id:"container",class:"flex justify-center"},Y=m(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u6A19\u984C",-1)),Z=m(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u91D1\u984D",-1)),ee=m(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u5E63\u503C",-1)),te=m(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u6578\u91CF",-1)),ae=m(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u5167\u6587",-1)),oe=m(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u5206\u985E",-1)),re=m(()=>d("div",{class:"text-h7 q-mt-md q-mr-lg"},"\u4E0A\u67B6",-1)),le={__name:"MemberAddProduct",setup(c){const V=B(),r=H(),S=A(),p=y(!1),Q=()=>{p.value=!p.value,p.value===!0?r.notify({type:"positive",message:"\u6700\u591A\u53EA\u80FD\u6709\u516D\u5F35\u5716\u7247"}):r.notify({type:"negative",message:"\u53D6\u6D88"})},g=y(!1),e=I({user:V.user,name:"",price:0,currency:"",MaxNumber:0,image:[],images:[],description:"",category:"",sell:!1,date:""}),_=y([]),b=y([]),x=["\u53F0\u5E63"],h=["\u5B63\u7968","\u79AE\u5305","\u5468\u908A","\u5176\u4ED6"],i={required:s=>!!s||"\u6B04\u4F4D\u5FC5\u586B",numberRequired:s=>!isNaN(s)&&s>0||"\u4E0D\u5F97\u5C0F\u65BC 0",currencyRequired:s=>x.includes(s)||"\u6C92\u6709\u8A72\u5E63\u503C",categoryRequired:s=>h.includes(s)||"\u6C92\u6709\u8A72\u5206\u985E"},j=()=>{e.name="",e.price=0,e.currency="",e.MaxNumber=0,e.image=[],e.images=[],_.value=[],b.value=[],e.description="",e.category="",e.sell=!1,p.value=!1,e.date=""},C=async()=>{if(e.image.length===0)return r.notify({type:"negative",message:"\u8ACB\u9078\u64C7\u5716\u7247"});const s=new Date().toJSON().slice(0,10);e.date=s;try{g.value=!0;const t=new FormData;t.append("user",V.user),t.append("name",e.name),t.append("price",e.price),t.append("currency",e.currency),t.append("MaxNumber",e.MaxNumber),t.append("image",e.image[0].file),t.append("description",e.description),t.append("category",e.category),t.append("sell",e.sell),t.append("date",e.date),e.images.length>=1&&e.images.forEach(f=>{t.append("images",f.file)}),await G.post("/products",t),g.value=!1,await J.fire({icon:"success",title:"\u65B0\u589E\u6210\u529F",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"},iconColor:"#A6D8D4",confirmButtonColor:"#A6D8D4",width:"20rem"}),S.push("/member/products")}catch(t){console.log(t),g.value=!1,r.notify({type:"negative",message:t.response.data.message})}};return(s,t)=>{const f=R("VueFileAgent");return z(),D(T,null,[K,d("div",W,[a(X,{onReset:j,onSubmit:P(C,["prevent"])},{default:l(()=>[a(N,{class:"flex column justify-center items-center q-pa-lg q-ma-xl"},{default:l(()=>[a(f,{maxSize:"1MB",deletable:!0,accept:"image/jpg,image/jpeg,image/png",helpText:"\u53EA\u63A5\u53D7 jpg, jpeg \u6216 png \u6A94",modelValue:e.image,"onUpdate:modelValue":t[0]||(t[0]=o=>e.image=o),rawModelValue:_.value,"onUpdate:rawModelValue":t[1]||(t[1]=o=>_.value=o),errorText:{type:"\u6A94\u6848\u985E\u578B\u4E0D\u5408\u6CD5\u3002\u53EA\u63A5\u53D7 jpg, jpeg \u6216 png \u6A94\u3002",size:"\u6A94\u6848\u5927\u5C0F\u4E0D\u5F97\u5927\u65BC1MB"}},null,8,["modelValue","rawModelValue"]),a(u,{horizontal:""},{default:l(()=>[Y,a(v,{color:"secondary",type:"text",modelValue:e.name,"onUpdate:modelValue":t[2]||(t[2]=o=>e.name=o),rules:[i.required]},null,8,["modelValue","rules"])]),_:1}),a(u,{horizontal:""},{default:l(()=>[Z,a(v,{color:"secondary",type:"number",modelValue:e.price,"onUpdate:modelValue":t[3]||(t[3]=o=>e.price=o),modelModifiers:{number:!0},rules:[i.required,i.numberRequired]},null,8,["modelValue","rules"])]),_:1}),a(u,{horizontal:""},{default:l(()=>[ee,a(w,{color:"secondary",modelValue:e.currency,"onUpdate:modelValue":t[4]||(t[4]=o=>e.currency=o),options:x,label:"\u5E63\u503C",rules:[i.required,i.currencyRequired]},null,8,["modelValue","rules"])]),_:1}),a(u,{horizontal:""},{default:l(()=>[te,a(v,{color:"secondary",type:"number",modelValue:e.MaxNumber,"onUpdate:modelValue":t[5]||(t[5]=o=>e.MaxNumber=o),modelModifiers:{number:!0},rules:[i.required,i.numberRequired]},null,8,["modelValue","rules"])]),_:1}),a(u,{horizontal:""},{default:l(()=>[ae,a(k,{"max-height":"20rem",rules:[i.required],modelValue:e.description,"onUpdate:modelValue":t[6]||(t[6]=o=>e.description=o),class:"q-my-md",dense:n(r).screen.lt.md,toolbar:[[{label:n(r).lang.editor.align,icon:n(r).iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],[{label:n(r).lang.editor.formatting,icon:n(r).iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:n(r).lang.editor.fontSize,icon:n(r).iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:n(r).lang.editor.defaultFont,icon:n(r).iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered"],["undo","redo"],["viewsource"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["rules","modelValue","dense","toolbar"])]),_:1}),a(u,{horizontal:""},{default:l(()=>[oe,a(w,{color:"secondary",modelValue:e.category,"onUpdate:modelValue":t[7]||(t[7]=o=>e.category=o),options:h,label:"\u5206\u985E",rules:[i.required,i.categoryRequired]},null,8,["modelValue","rules"])]),_:1}),a(u,{horizontal:""},{default:l(()=>[re,a(F,{class:"q-mt-sm",color:"secondary",modelValue:e.sell,"onUpdate:modelValue":t[8]||(t[8]=o=>e.sell=o)},null,8,["modelValue"])]),_:1}),a(M,{class:"q-mt-sm"},{default:l(()=>[a(q,{unelevated:"",rounded:"",style:{width:"6rem"},size:"1rem",outline:"",color:"secondary",label:"\u66F4\u591A\u5716\u7247",onClick:Q})]),_:1}),p.value?(z(),O(u,{key:0,horizontal:""},{default:l(()=>[a(f,{multiple:!0,maxFiles:6,maxSize:"1MB",deletable:!0,accept:"image/jpg,image/jpeg,image/png",helpText:"\u53EA\u63A5\u53D7 jpg, jpeg \u6216 png \u6A94\uFF0C\u6700\u591A\u516D\u5F35\u3002",modelValue:e.images,"onUpdate:modelValue":t[9]||(t[9]=o=>e.images=o),errorText:{type:"\u6A94\u6848\u985E\u578B\u4E0D\u5408\u6CD5\u3002\u53EA\u63A5\u53D7 jpg, jpeg \u6216 png \u6A94\u3002",size:"\u6A94\u6848\u5927\u5C0F\u4E0D\u5F97\u5927\u65BC1MB"},rawModelValue:b.value,"onUpdate:rawModelValue":t[10]||(t[10]=o=>b.value=o)},null,8,["modelValue","rawModelValue"])]),_:1})):E("",!0),a(M,{class:"q-mt-sm"},{default:l(()=>[a(q,{type:"submit",unelevated:"",rounded:"",style:{width:"6rem"},size:"1rem",color:"secondary",label:"\u9001\u51FA",loading:g.value},null,8,["loading"]),a(q,{type:"reset",unelevated:"",rounded:"",style:{width:"6rem"},size:"1rem",outline:"",color:"secondary",label:"\u6E05\u9664"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])])],64)}}};var Se=U(le,[["__scopeId","data-v-718d8996"]]);export{Se as default};
